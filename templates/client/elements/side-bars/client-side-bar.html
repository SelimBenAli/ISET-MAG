<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
<script src="{{ url_for('static', filename='js/client-script.js') }}"></script> <!-- SOCKET FILE -->
<script src="{{ url_for('static', filename='js/auth.js') }}"></script>

<clientdata hidden>{{ user }}</clientdata>
<nav class="navbar navbar-expand-md fixed-top navbar-shrink py-3" id="mainNav">
    <div class="container"><a class="navbar-brand d-flex align-items-center"><span>ISET . TRACKER</span></a>

    <a
                        class="nav-link"
                        >{{ user['nom_utilisateur'] }} {{ user['prenom_utilisateur'] }}</a>
        <button data-bs-toggle="collapse" class="navbar-toggler" data-bs-target="#navcol-1"><span
                class="visually-hidden">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse" id="navcol-1">
        <ul class="navbar-nav mx-auto">

        </ul>
            <ul class="navbar-nav mx-auto">
                {% if user['role_utilisateur']['id_role'] == 2 %}
                    <audio id="sound-alert-client" src="{{ url_for('static', filename='sound/message.wav') }}"></audio>
                    <script>load_client_alerts()</script>
                    {% if page_name != 'openPageReclamationActiveClient' %}
                        <script>

                            socket.on('update_client_alerts', function (data) {
                                load_client_alerts()
                                var audio = document.getElementById("sound-alert-client")
                                audio.play();

                            })

                        </script>
                    {% else %}
                        <script>

                            socket.on('update_client_alerts', function (data) {

                                load_client_alerts()
                                show_client_reclamation(data['reclamation'])
                                var audio = document.getElementById("sound-alert-client")
                                audio.play();
                                /*window.location.reload()*/
                            })

                            socket.on('delete_reclamation_alert', function (data) {

                                load_client_alerts()
                                delete_client_reclamation(data['id_reclamation'])
                                /*window.location.reload()*/
                            })

                        </script>
                    {% endif %}
                    <li class="nav-item"><a
                            class="nav-link {% if page_name == 'openPageReclamationActiveClient' %} fw-bold underline {% endif %} "
                            onclick="openPageReclamationActiveClient()">Réclamations en Cours <span
                            id="client-alert-number" class="badge bg-danger badge-counter" >1+</span><i
                            class="fas fa-bell fa-fw"></i>
                    </a>

                    </li>
                {% endif %}
                <li class="nav-item"><a
                        class="nav-link {% if page_name == 'openPageLocationClient' %} fw-bold underline {% endif %} "
                        onclick="openPageLocationClient()">Réserver Matériel</a></li>
                <li class="nav-item"><a
                        class="nav-link {% if page_name == 'openPageReclamationClient' %} fw-bold underline {% endif %} "
                        onclick="openPageReclamationClient()">Réclamation</a></li>
                <li class="nav-item"><a
                        class="nav-link {% if page_name == 'openPageHistoriqueMaterielleClient' %} fw-bold underline {% endif %} "
                        onclick="openPageHistoriqueMaterielleClient()">Prêts En Cours</a></li>
                <li class="nav-item"><a
                        class="nav-link {% if page_name == 'openPageHistoriqueLocationClient' %} fw-bold underline {% endif %} "
                        onclick="openPageHistoriqueLocationClient()">Historique Réservation</a></li>
                <li class="nav-item"><a
                        class="nav-link {% if page_name == 'openPageHistoriqueReclamationClient' %} fw-bold underline {% endif %} "
                        onclick="openPageHistoriqueReclamationClient()">Historique Réclamation</a></li>
                <li class="nav-item"><a
                        class="nav-link {% if page_name == 'openPageContactClient' %} fw-bold underline {% endif %} "
                        onclick="openPageContactClient()">Contactez Nous</a></li>

            </ul>
            <a class="btn btn-primary shadow" role="button" onclick="logout_request()">Logout</a>
        </div>
    </div>
</nav>